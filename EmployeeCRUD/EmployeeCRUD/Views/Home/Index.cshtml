@{
    ViewBag.Title = "Home Page";
}

<form id="form1" name="form1" method="post" action="api/Employee" enctype="multipart/form-data">

    <div>

        <label>

            First Name
        </label>

        <input type="text" id="FirstName" />

    </div>

    <div>

        <label>

            Last Name
        </label>

        <input type="text" id="LastName" />

    </div>


    <div>

        <label>

            Brows File
        </label>

        <input name="Resumes" id="Resumes" type="file" multiple  />

    </div>

    <div>

        <input type="button" id="btnGet" value="Upload" />

    </div>

</form>
<script src="~/Scripts/jquery-3.3.1.js"></script>
<script type="text/javascript">
    $(function () {
        $("#btnGet").click(function () {

            var data = new FormData();
            //data.append("FirstName");

            var EmployeeModel = {
                FirstName: $("#FirstName").val(),
                LastName: $("#LastName").val(),
                Resumes: $('#Resumes').val()
            }
            var fd = new FormData();
            var file_data = $('input[type="file"]')[0].files; // for multiple files
            for (var i = 0; i < file_data.length; i++) {
                fd.append("file_" + i, file_data[i]);
            }
            //var other_data = $('form').serializeArray();
            //$.each(other_data, function (key, input) {
            //    fd.append(input.name, input.value);
            //});
            var model = JSON.stringify(EmployeeModel);
            console.log(model);

            var formData = new FormData();
            formData.append('FirstName', data.firstName);
            formData.append('LastName', data.lastName);

            for (let i = 0; i < file_data.length; i++) {
                formData.append('Files', file_data[i], file_data[i]['name']);
            }



            $.ajax({
                type: "POST",
                url: '/api/Employee/',    // CALL WEB API TO SAVE THE FILES.
                enctype: 'multipart/form-data',
              //  dataType: 'json',
              // contentType: "application/json; charset=utf-8",
                processData: false,         // PREVENT AUTOMATIC DATA PROCESSING.
                cache: false,
                data: fd, 		        // DATA OR FILES IN THIS CONTEXT.
                success: function (data, textStatus, xhr) {
                    alert("Successful")
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus + ': ' + errorThrown);
                }
            });

        });






    });
</script>
